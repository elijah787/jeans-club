I'll create a version with **only** the camera scanning functionality changed to match your second file, while keeping everything else exactly as it is in your first file.

Here's the complete updated HTML with **only** the camera scanning changes:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeans Club - Raised on Denim</title>
    <style>
        /* ALL YOUR EXISTING CSS STYLES - UNCHANGED */
        /* MERCEDES-BENZ INSPIRED HEADER & NAVIGATION */
        .mercedes-header {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            color: white;
            font-family: 'Arial', sans-serif;
            position: relative;
            z-index: 1000;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .brand-logo {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #ffffff;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .logo-jeans {
            color: #00AFF0;
        }

        .logo-club {
            color: #ffffff;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .search-icon, .user-icon, .menu-toggle {
            cursor: pointer;
            font-size: 20px;
            transition: color 0.3s;
        }

        .search-icon:hover, .user-icon:hover, .menu-toggle:hover {
            color: #00AFF0;
        }

        /* Search Modal */
        .search-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: flex-start;
            padding-top: 100px;
        }

        .search-modal.active {
            display: flex;
        }

        .search-container {
            width: 90%;
            max-width: 600px;
        }

        .search-input {
            width: 100%;
            padding: 20px;
            font-size: 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid #00AFF0;
            color: white;
            outline: none;
        }

        .search-input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .search-results {
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
        }

        .search-result-item {
            padding: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        .search-result-item:hover {
            background: rgba(255,255,255,0.1);
        }

        .search-close {
            position: absolute;
            top: 30px;
            right: 30px;
            color: white;
            font-size: 30px;
            cursor: pointer;
            background: rgba(0,0,0,0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main Navigation */
        .main-navigation {
            display: flex;
            justify-content: center;
            padding: 0 40px;
            background: rgba(0, 0, 0, 0.95);
        }

        .nav-links {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 40px;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            color: #ffffff;
            text-decoration: none;
            padding: 20px 0;
            display: inline-block;
            font-size: 15px;
            font-weight: 500;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            transition: color 0.3s;
        }

        .nav-link:hover {
            color: #00AFF0;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: #00AFF0;
            transition: width 0.3s;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
        }

        .menu-toggle span {
            width: 25px;
            height: 2px;
            background: white;
            transition: 0.3s;
        }

        /* Full Page Background */
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
                        url('https://images.unsplash.com/photo-1542272604-787c3835535d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
        }

        /* Hero Section */
        .hero-section {
            color: white;
            padding: 100px 20px;
            text-align: center;
            margin-bottom: 60px;
            background: transparent;
        }

        .hero-title {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .hero-subtitle {
            font-size: 20px;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto 40px;
            line-height: 1.6;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* Information Pages */
        .info-page {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            margin: 20px auto;
            max-width: 1200px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .info-page h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-align: center;
        }

        .info-page h2 {
            color: #667eea;
            margin: 30px 0 15px;
            font-size: 1.8em;
        }

        .info-page p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .info-page ul, .info-page ol {
            color: #555;
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .info-page li {
            margin-bottom: 10px;
        }

        .tiers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .tier-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-top: 4px solid;
        }

        .tier-card.pearl { border-color: #FFF8DC; }
        .tier-card.bronze { border-color: #B76E79; }
        .tier-card.silver { border-color: #2C3E50; }
        .tier-card.ruby { border-color: #8B475D; }
        .tier-card.gold { border-color: #FFD700; }
        .tier-card.sapphire { border-color: #34495E; }
        .tier-card.platinum { border-color: #2F4F4F; }

        .tier-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .benefits-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .benefit-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .benefit-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        /* Enhanced Voucher/QR Details Display */
        .voucher-details-display, .qr-details-display {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .detail-item {
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .detail-item strong {
            color: #333;
            display: block;
            margin-bottom: 5px;
        }

        /* Social Media Links */
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .social-link {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.3s;
        }

        .social-link:hover {
            transform: translateY(-2px);
        }

        .social-tiktok { background: #000000; }
        .social-instagram { background: #E4405F; }
        .social-x { background: #000000; }

        /* REST OF YOUR EXISTING CSS STYLES */
        * {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
            box-sizing: inherit;
        }

        *, *::after, *::before {
            box-sizing: inherit;
        }

        html {
            width: 100%;
            height: auto;
            overflow-x: visible;
            overflow-x: initial;
            font-size: 10px;
            line-height: 1;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            -ms-text-size-adjust: 100%;
            -webkit-text-size-adjust: 100%;
            --scrollWidth: 0px;
        }

        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            color: #333;
            font-size: 1.4rem;
            font-family: HelveticaNeue-Light, Helvetica, Arial, sans-serif;
            line-height: 1.1;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, .004);
        }

        /* TYPOGRAPHY SYSTEM */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            font-family: Emirates-Bold, Helvetica, Arial, Lucida Grande, sans-serif;
            display: inline-block;
            margin: 0 0 1rem;
            text-align: left;
        }

        h1 {
            font-size: 2.5em;
        }

        h2 {
            font-size: 1.6rem;
        }

        .reset-h {
            display: block;
        }

        .links-section__heading {
            margin: 0;
            padding: 10px;
            color: #fff;
            font-weight: 400;
            font-size: 1.8rem;
            line-height: 2.5rem;
            opacity: .9;
            -webkit-font-smoothing: antialiased;
        }

        @media only screen and (min-width: 1024px) {
            .links-section__heading {
                padding: 25px 0 0;
            }
        }

        /* YOUR EXISTING COMPONENT STYLES */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #333;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            color: #666;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        .hidden {
            display: none;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        input, select, button, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: HelveticaNeue-Light, Helvetica, Arial, sans-serif;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            font-family: Emirates-Bold, Helvetica, Arial, sans-serif;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn.secondary {
            background: #6c757d;
        }

        .btn.google {
            background: white;
            color: #333;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn.google img {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }

        .section-title {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            font-family: Emirates-Bold, Helvetica, Arial, sans-serif;
        }

        .member-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .info-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-family: Emirates-Bold, Helvetica, Arial, sans-serif;
        }

        .info-card p {
            color: #666;
            font-size: 1.1em;
        }

        .tier-pearl { color: #FFF8DC; }
        .tier-bronze { color: #B76E79; }
        .tier-silver { color: #2C3E50; }
        .tier-ruby { color: #8B475D; }
        .tier-gold { color: #FFD700; }
        .tier-sapphire { color: #34495E; }
        .tier-platinum { color: #2F4F4F; }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
        }

        .activity-log {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .discount-result {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .discount-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .discount-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .admin-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #28a745;
        }

        .members-list {
            display: grid;
            gap: 15px;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-buttons .btn {
            flex: 1;
        }

        .newsletter-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .newsletter-checkbox input {
            width: auto;
        }

        .newsletter-checkbox label {
            margin: 0;
            font-weight: normal;
        }

        /* IMPROVED MEMBER CARD STYLES - FIXED FOR MOBILE */
        .member-card-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            perspective: 1000px;
        }

        .member-card {
            width: 360px;
            height: 220px;
            border-radius: 20px;
            padding: 25px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
            font-family: 'Arial', sans-serif;
            color: white;
            transition: transform 0.3s ease;
            transform-style: preserve-3d;
        }

        .member-card:hover {
            transform: translateY(-5px) rotateX(5deg);
        }

        /* UPDATED TIER COLORS */
        .member-card.pearl {
            background: linear-gradient(135deg, #FFF8DC 0%, #F5DEB3 100%);
            color: #333;
        }

        .member-card.bronze {
            background: linear-gradient(135deg, #B76E79 0%, #8B475D 100%);
        }

        .member-card.silver {
            background: linear-gradient(135deg, #2C3E50 0%, #34495E 100%);
        }

        .member-card.ruby {
            background: linear-gradient(135deg, #8B475D 0%, #6B3648 100%);
        }

        .member-card.gold {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #333;
        }

        .member-card.sapphire {
            background: linear-gradient(135deg, #34495E 0%, #1F2B3A 100%);
        }

        .member-card.platinum {
            background: linear-gradient(135deg, #2F4F4F 0%, #000000 100%);
        }

        /* Card design elements */
        .card-background-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.1;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255,255,255,0.8) 2px, transparent 2px),
                radial-gradient(circle at 80% 20%, rgba(255,255,255,0.6) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .card-logo {
            position: absolute;
            top: 20px;
            right: 25px;
            font-weight: bold;
            font-size: 18px;
            letter-spacing: 1px;
        }

        .card-chip {
            position: absolute;
            top: 20px;
            left: 25px;
            width: 40px;
            height: 30px;
            background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%);
            border-radius: 5px;
            border: 1px solid rgba(255,255,255,0.5);
        }

        .card-chip::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            width: 30px;
            height: 20px;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 3px;
        }

        /* FIXED JC ID DISPLAY FOR MOBILE */
        .card-number {
            position: absolute;
            top: 75px; /* Adjusted for better mobile spacing */
            left: 25px;
            font-size: 20px; /* Slightly larger for better readability */
            letter-spacing: 3px; /* Increased spacing */
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            width: calc(100% - 50px);
            white-space: nowrap;
            overflow: visible;
            text-overflow: clip;
            display: flex;
            justify-content: flex-start;
            gap: 5px;
        }

        /* FIXED CARD HOLDER POSITIONING */
        .card-holder {
            position: absolute;
            bottom: 70px; /* Positioned above JC ID with more space */
            left: 25px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        .card-holder-name {
            font-size: 18px; /* Slightly larger for mobile */
            font-weight: bold;
            margin-top: 8px; /* More space between label and name */
            text-transform: uppercase;
            letter-spacing: 1.5px;
            line-height: 1.2;
        }

        .card-tier {
            position: absolute;
            bottom: 25px;
            left: 25px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
        }

        .card-date {
            position: absolute;
            bottom: 25px;
            right: 25px;
            font-weight: bold;
            font-size: 14px;
            letter-spacing: 1px;
        }

        /* Special number styling like the reference images */
        .card-number span {
            display: inline-block;
            background: rgba(0,0,0,0.2);
            padding: 2px 8px;
            margin: 0 1px;
            border-radius: 4px;
            min-width: 22px;
            text-align: center;
        }

        /* SIM card holographic effect */
        .card-hologram {
            position: absolute;
            top: 20px;
            right: 80px;
            width: 50px;
            height: 30px;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 5px,
                    rgba(255,255,255,0.2) 5px,
                    rgba(255,255,255,0.2) 10px
                ),
                repeating-linear-gradient(
                    -45deg,
                    transparent,
                    transparent 5px,
                    rgba(255,255,255,0.1) 5px,
                    rgba(255,255,255,0.1) 10px
                );
            border-radius: 5px;
            transform: skewX(-10deg);
            box-shadow: 0 0 5px rgba(255,255,255,0.3);
        }

        /* NEW VOUCHER MANAGEMENT STYLES */
        .voucher-management-section {
            margin-top: 30px;
        }

        .voucher-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #28a745;
        }

        .voucher-item.used {
            border-left-color: #6c757d;
            opacity: 0.7;
        }

        .voucher-item.expired {
            border-left-color: #dc3545;
        }

        .voucher-code {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            background: #e9ecef;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
            margin: 5px 0;
        }

        .voucher-qr {
            margin: 10px 0;
            text-align: center;
        }

        .voucher-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-used {
            background: #e2e3e5;
            color: #383d41;
        }

        .status-expired {
            background: #f8d7da;
            color: #721c24;
        }

        .scan-voucher-section {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }

        /* QR Redemption Styles */
        .redemption-option {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .redemption-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .redemption-option.selected {
            border-color: #28a745;
            background: #e8f5e8;
        }

        .option-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .option-tier {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .selected-option-details {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .success-card {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #c3e6cb;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .info-message {
            background: #e7f3ff;
            color: #2196F3;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        /* QR Code Container */
        .qr-code-container {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .qr-share-section {
            display: block !important;
        }

        /* Redemption Item */
        .redemption-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .redemption-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .redemption-id {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            background: #e9ecef;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
            margin: 5px 0;
        }

        /* NEW CAMERA SCANNER STYLES - UPDATED FROM SECOND FILE */
        .camera-scanner-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            justify-content: center;
            align-items: center;
        }

        .camera-scanner-modal.active {
            display: flex;
        }

        .camera-container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .camera-viewport {
            width: 100%;
            height: 400px;
            background: #000;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #cameraVideo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(1);
            background: #000;
        }

        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .scan-frame {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 250px;
            height: 250px;
            border: 3px solid #00AFF0;
            border-radius: 15px;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        }

        .scan-line {
            position: absolute;
            width: 100%;
            height: 3px;
            background: #00AFF0;
            animation: scan 2s ease-in-out infinite;
        }

        @keyframes scan {
            0% { top: 0; }
            50% { top: calc(100% - 3px); }
            100% { top: 0; }
        }

        .camera-controls {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .camera-btn {
            background: #00AFF0;
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .camera-btn:hover {
            background: #0090d0;
            transform: scale(1.1);
        }

        .camera-btn.close-btn {
            background: #dc3545;
        }

        .camera-btn.close-btn:hover {
            background: #c82333;
        }

        .scan-status {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            text-align: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            z-index: 100;
        }

        .scan-success {
            color: #28a745;
            text-shadow: 0 0 10px rgba(40, 167, 69, 0.5);
        }

        .scan-error {
            color: #dc3545;
            text-shadow: 0 0 10px rgba(220, 53, 69, 0.5);
        }

        .scan-processing {
            color: #ffc107;
            text-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
        }

        /* Status border effects */
        body.scan-success {
            border: 10px solid #28a745;
            animation: borderPulse 2s ease-in-out;
        }

        body.scan-error {
            border: 10px solid #dc3545;
            animation: borderPulse 2s ease-in-out;
        }

        @keyframes borderPulse {
            0% { border-width: 10px; }
            50% { border-width: 15px; }
            100% { border-width: 10px; }
        }

        /* Quick Scan Button */
        .quick-scan-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.3s;
            margin: 10px 0;
        }

        .quick-scan-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .quick-scan-btn i {
            font-size: 20px;
        }

        /* Scan Results Display */
        .scan-results {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            animation: slideIn 0.3s ease;
        }

        .scan-results.success {
            border-left: 5px solid #28a745;
        }

        .scan-results.error {
            border-left: 5px solid #dc3545;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .nav-links {
                gap: 20px;
            }
            
            .header-top {
                padding: 15px 20px;
            }
            
            .main-navigation {
                padding: 0 20px;
            }
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: flex;
            }
            
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(0, 0, 0, 0.95);
                flex-direction: column;
                padding: 20px;
                gap: 10px;
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-link {
                padding: 15px;
                width: 100%;
            }
            
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 20px;
            }
            
            .member-info {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            /* MOBILE CARD ADJUSTMENTS */
            .member-card {
                width: 320px;
                height: 200px;
                padding: 20px;
            }
            
            .card-number {
                top: 70px;
                font-size: 18px;
                letter-spacing: 2px;
            }
            
            .card-number span {
                padding: 2px 6px;
                min-width: 18px;
            }
            
            .card-holder {
                bottom: 65px;
            }
            
            .card-holder-name {
                font-size: 16px;
                margin-top: 6px;
            }
            
            .card-tier, .card-date {
                bottom: 20px;
                font-size: 12px;
            }
            
            .card-logo {
                font-size: 16px;
                top: 15px;
                right: 20px;
            }
            
            .card-chip {
                top: 15px;
                left: 20px;
                width: 35px;
                height: 25px;
            }
            
            .hero-title {
                font-size: 36px;
            }
            
            .hero-subtitle {
                font-size: 18px;
            }
            
            .tiers-grid, .benefits-list {
                grid-template-columns: 1fr;
            }
            
            .camera-viewport {
                height: 300px;
            }
            
            .scan-frame {
                width: 200px;
                height: 200px;
            }
        }

        @media (max-width: 480px) {
            .member-card {
                width: 290px;
                height: 180px;
                padding: 15px;
            }
            
            .card-number {
                top: 65px;
                font-size: 16px;
                letter-spacing: 1.5px;
            }
            
            .card-number span {
                padding: 1px 4px;
                min-width: 16px;
            }
            
            .card-holder {
                bottom: 60px;
                font-size: 10px;
            }
            
            .card-holder-name {
                font-size: 14px;
                margin-top: 4px;
                letter-spacing: 1px;
            }
            
            .card-tier, .card-date {
                bottom: 15px;
                font-size: 10px;
            }
            
            .card-logo {
                font-size: 14px;
                top: 10px;
                right: 15px;
            }
            
            .card-chip {
                top: 10px;
                left: 15px;
                width: 30px;
                height: 20px;
            }
            
            .hero-title {
                font-size: 28px;
            }
            
            .hero-subtitle {
                font-size: 16px;
            }
            
            .camera-viewport {
                height: 250px;
            }
            
            .scan-frame {
                width: 180px;
                height: 180px;
            }
            
            .camera-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }

        @media (max-width: 360px) {
            .member-card {
                width: 280px;
                height: 170px;
            }
            
            .card-number {
                font-size: 14px;
            }
            
            .card-holder-name {
                font-size: 13px;
            }
        }

        /* Footer */
        .footer {
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 60px 20px 30px;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
        }

        .footer-section h3 {
            color: #00AFF0;
            margin-bottom: 20px;
            font-size: 18px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .footer-section p {
            color: #999;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #666;
            font-size: 14px;
        }
    </style>
    <!-- Add Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- Add QR Scanner Library - UPDATED TO MATCH SECOND FILE -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
</head>
<body>
    <!-- Search Modal -->
    <div class="search-modal" id="searchModal">
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Search for members, vouchers, redemptions...">
            <div class="search-results" id="searchResults"></div>
        </div>
        <div class="search-close" onclick="hideSearch()">√ó</div>
    </div>

    <!-- Camera Scanner Modal - UPDATED TO MATCH SECOND FILE -->
    <div class="camera-scanner-modal" id="cameraScannerModal">
        <div class="camera-container">
            <div class="scan-status" id="scanStatus">
                Loading camera...
            </div>
            <div class="camera-viewport">
                <div id="qr-reader" style="width: 100%; height: 100%;"></div>
                <div id="qr-reader-results"></div>
            </div>
            <div class="camera-controls">
                <button class="camera-btn close-btn" onclick="closeCameraScanner()">
                    √ó
                </button>
                <button class="camera-btn" onclick="switchCamera()" id="switchCameraBtn">
                    ‚Üª
                </button>
                <button class="camera-btn" onclick="toggleFlash()" id="flashBtn">
                    ‚ö°
                </button>
            </div>
        </div>
    </div>

    <!-- Mercedes-Benz Inspired Header -->
    <header class="mercedes-header">
        <div class="header-top">
            <div class="brand-logo">
                <div class="logo">
                    <span class="logo-jeans">JEANS</span>
                    <span class="logo-club">CLUB</span>
                </div>
            </div>
            
            <div class="header-actions">
                <div class="search-icon" onclick="showSearch()">üîç</div>
                <div class="user-icon" onclick="toggleUserMenu()">üë§</div>
                <div class="menu-toggle" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
        
        <nav class="main-navigation">
            <ul class="nav-links" id="navLinks">
                <li class="nav-item"><a href="#dashboard" class="nav-link" onclick="showDashboardSection()">Dashboard</a></li>
                <li class="nav-item"><a href="#membership" class="nav-link" onclick="showMembershipInfo()">Membership</a></li>
                <li class="nav-item"><a href="#benefits" class="nav-link" onclick="showBenefits()">Benefits</a></li>
                <li class="nav-item"><a href="#tiers" class="nav-link" onclick="showTiers()">Tiers</a></li>
                <li class="nav-item"><a href="#rewards" class="nav-link" onclick="showRewards()">Rewards</a></li>
                <li class="nav-item"><a href="#qr" class="nav-link" onclick="showQRRedemptionPanel()">QR Redemption</a></li>
                <li class="nav-item"><a href="#contact" class="nav-link" onclick="showContact()">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <h1 class="hero-title">Raised on Denim</h1>
        <p class="hero-subtitle">Experience premium denim with exclusive tiered privileges. Join our loyalty program and unlock amazing rewards with every purchase.</p>
    </section>

    <div class="container" id="main-content">
        <!-- Information Pages -->
        <div id="membershipInfoPage" class="info-page hidden">
            <div class="nav-buttons">
                <button class="btn secondary" onclick="showDashboardSection()">‚Üê Back to Dashboard</button>
            </div>
            
            <h1>Membership Information</h1>
            
            <h2>Welcome to Jeans Club Membership</h2>
            <p>Our loyalty program is designed to reward our most valued customers with exclusive benefits, points, and tiered privileges. As a member, you'll enjoy a premium denim shopping experience like no other.</p>
            
            <h2>How to Join</h2>
            <ol>
                <li>Sign up using your email address or Google account</li>
                <li>Receive your unique JC ID (Jeans Club Identification)</li>
                <li>Get your starting points and referral code</li>
                <li>Start shopping to earn points and climb tiers</li>
            </ol>
            
            <h2>Membership Features</h2>
            <div class="benefits-list">
                <div class="benefit-item">
                    <div class="benefit-icon">üéÅ</div>
                    <h3>Points System</h3>
                    <p>Earn points with every purchase. Higher tiers earn points faster with multipliers.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">‚≠ê</div>
                    <h3>7 Tiers</h3>
                    <p>Progress through Pearl, Bronze, Silver, Ruby, Gold, Sapphire, and Platinum tiers.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üë•</div>
                    <h3>Referral Program</h3>
                    <p>Earn 100 points for each friend who joins using your referral code.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üíé</div>
                    <h3>Exclusive Discounts</h3>
                    <p>Convert points to discount vouchers or use points for purchases.</p>
                </div>
            </div>
            
            <h2>Getting Started</h2>
            <p>Upon joining, you'll receive:</p>
            <ul>
                <li>10 welcome points (20 if referred by a friend)</li>
                <li>Unique JC ID for all transactions</li>
                <li>Personal referral code to share with friends</li>
                <li>Starting tier: Pearl</li>
                <li>Access to your digital membership card</li>
            </ul>
            
            <h2>Managing Your Membership</h2>
            <p>Use your dashboard to:</p>
            <ul>
                <li>Track your points balance and tier progress</li>
                <li>View purchase history and activity log</li>
                <li>Create and manage discount vouchers</li>
                <li>Share your referral code</li>
                <li>Update newsletter preferences</li>
            </ul>
            
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn" onclick="showSignupScreen()">Join Now</button>
                <button class="btn secondary" onclick="showLoginScreen()" style="margin-left: 10px;">Login</button>
            </div>
        </div>

        <div id="benefitsInfoPage" class="info-page hidden">
            <div class="nav-buttons">
                <button class="btn secondary" onclick="showDashboardSection()">‚Üê Back to Dashboard</button>
            </div>
            
            <h1>Member Benefits</h1>
            
            <h2>üåü Exclusive Member Benefits</h2>
            <p>As a Jeans Club member, you unlock a world of exclusive benefits designed to enhance your denim shopping experience.</p>
            
            <div class="benefits-list">
                <div class="benefit-item">
                    <div class="benefit-icon">üí∞</div>
                    <h3>Points Redemption</h3>
                    <p>Convert points to discount vouchers or use them to pay for purchases.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üé´</div>
                    <h3>QR Code Redemption</h3>
                    <p>Generate QR codes for instant redemption at checkout.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üìß</div>
                    <h3>Exclusive Emails</h3>
                    <p>Receive personalized offers, new arrival alerts, and style tips.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">‚ö°</div>
                    <h3>Faster Checkout</h3>
                    <p>Quick QR code scanning for seamless purchases.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üéÅ</div>
                    <h3>Birthday Rewards</h3>
                    <p>Special birthday discounts and bonus points.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üëë</div>
                    <h3>VIP Access</h3>
                    <p>Early access to sales and exclusive collections.</p>
                </div>
            </div>
            
            <h2>üéØ Tier-Specific Benefits</h2>
            <p>Your benefits increase as you progress through tiers:</p>
            
            <h3>Pearl & Bronze Tiers</h3>
            <ul>
                <li>Basic points earning (1x multiplier)</li>
                <li>Discount voucher creation</li>
                <li>Newsletter subscription</li>
                <li>Referral program access</li>
            </ul>
            
            <h3>Silver & Ruby Tiers</h3>
            <ul>
                <li>Higher points multipliers (1.1x - 1.3x)</li>
                <li>Pay-with-points redemption options</li>
                <li>Extended voucher validity</li>
                <li>Priority email support</li>
            </ul>
            
            <h3>Gold & Sapphire Tiers</h3>
            <ul>
                <li>Premium multipliers (1.4x - 1.5x)</li>
                <li>Higher discount percentages</li>
                <li>Lifetime spending bonuses</li>
                <li>Exclusive event invitations</li>
            </ul>
            
            <h3>Platinum Tier</h3>
            <ul>
                <li>Maximum multiplier (1.6x)</li>
                <li>All redemption options available</li>
                <li>Personalized shopping assistance</li>
                <li>Highest discount rates</li>
            </ul>
            
            <h2>üîß How to Maximize Benefits</h2>
            <ol>
                <li>Shop regularly to earn more points</li>
                <li>Use referral codes to earn bonus points</li>
                <li>Subscribe to newsletters for exclusive offers</li>
                <li>Use QR codes for faster redemptions</li>
                <li>Combine points for larger discounts</li>
                <li>Participate in seasonal promotions</li>
            </ol>
            
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn" onclick="showDashboardSection()">View Your Benefits</button>
            </div>
        </div>

        <div id="tiersInfoPage" class="info-page hidden">
            <div class="nav-buttons">
                <button class="btn secondary" onclick="showDashboardSection()">‚Üê Back to Dashboard</button>
            </div>
            
            <h1>Tier System</h1>
            
            <h2>üéØ Our 7-Tier System</h2>
            <p>Progress through our carefully designed tier system to unlock increasingly valuable benefits and rewards.</p>
            
            <div class="tiers-grid">
                <div class="tier-card pearl">
                    <h3>PEARL</h3>
                    <p><strong>Points Range:</strong> 0 - 7,499</p>
                    <p><strong>Multiplier:</strong> 1.0x</p>
                    <p><strong>Discount Rate:</strong> 3%</p>
                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>Basic points earning</li>
                        <li>Discount vouchers</li>
                        <li>Newsletter access</li>
                        <li>Referral program</li>
                    </ul>
                </div>
                
                <div class="tier-card bronze">
                    <h3>BRONZE</h3>
                    <p><strong>Points Range:</strong> 7,500 - 24,999</p>
                    <p><strong>Multiplier:</strong> 1.1x</p>
                    <p><strong>Discount Rate:</strong> 4%</p>
                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>All Pearl benefits</li>
                        <li>Higher point multiplier</li>
                        <li>8% spending redemption</li>
                        <li>Extended support</li>
                    </ul>
                </div>
                
                <div class="tier-card silver">
                    <h3>SILVER</h3>
                    <p><strong>Points Range:</strong> 25,000 - 99,999</p>
                    <p><strong>Multiplier:</strong> 1.25x</p>
                    <p><strong>Discount Rate:</strong> 5%</p>
                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>10% spending redemption</li>
                        <li>Pay-with-points option</li>
                        <li>Priority support</li>
                        <li>Early sale access</li>
                    </ul>
                </div>
                
                <div class="tier-card ruby">
                    <h3>RUBY</h3>
                    <p><strong>Points Range:</strong> 100,000 - 249,999</p>
                    <p><strong>Multiplier:</strong> 1.3x</p>
                    <p><strong>Discount Rate:</strong> 6%</p>
                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>12% spending redemption</li>
                        <li>Higher discount caps</li>
                        <li>Exclusive offers</li>
                        <li>Faster processing</li>
                    </ul>
                </div>
                
                <div class="tier-card gold">
                    <h3>GOLD</h3>
                    <p><strong>Points Range:</strong> 250,000 - 499,999</p>
                    <p><strong>Multiplier:</strong> 1.4x</p>
                    <p><strong>Discount Rate:</strong> 7%</p>
                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>15% spending redemption</li>
                        <li>Loyalty bonuses</li>
                        <li>VIP treatment</li>
                        <li>Event invitations</li>
                    </ul>
                </div>
                
                <div class="tier-card sapphire">
                    <h3>SAPPHIRE</h3>
                    <p><strong>Points Range:</strong> 500,000 - 999,999</p>
                    <p><strong>Multiplier:</strong> 1.5x</p>
                    <p><strong>Discount Rate:</strong> 8%</p>
                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>18% + 2% lifetime bonus</li>
                        <li>Maximum discounts</li>
                        <li>Personal assistant</li>
                        <li>Custom fittings</li>
                    </ul>
                </div>
                
                <div class="tier-card platinum">
                    <h3>PLATINUM</h3>
                    <p><strong>Points Range:</strong> 1,000,000+</p>
                    <p><strong>Multiplier:</strong> 1.6x</p>
                    <p><strong>Discount Rate:</strong> 10%</p>
                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>25% + 5% lifetime bonus</li>
                        <li>All redemption options</li>
                        <li>Exclusive collections</li>
                        <li>Highest privileges</li>
                    </ul>
                </div>
            </div>
            
            <h2>üìà Tier Progression</h2>
            <p>Your tier is automatically calculated based on your total points. Points never expire and tiers only go up - once you reach a tier, you never downgrade!</p>
            
            <h3>How to Move Up Tiers</h3>
            <ol>
                <li><strong>Make Purchases:</strong> Every purchase earns points based on your current tier multiplier</li>
                <li><strong>Refer Friends:</strong> Earn 100 points for each successful referral</li>
                <li><strong>Participate in Promotions:</strong> Seasonal events offer bonus points</li>
                <li><strong>Be Consistent:</strong> Regular shopping accelerates tier progression</li>
            </ol>
            
            <h3>Important Notes</h3>
            <ul>
                <li>Points are permanent and never expire</li>
                <li>Tiers only increase - no downgrading</li>
                <li>Higher tiers = better multipliers and benefits</li>
                <li>All benefits are cumulative</li>
                <li>Redemption options expand with higher tiers</li>
            </ul>
            
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn" onclick="showDashboardSection()">Check Your Tier Progress</button>
            </div>
        </div>

        <div id="contactInfoPage" class="info-page hidden">
            <div class="nav-buttons">
                <button class="btn secondary" onclick="showDashboardSection()">‚Üê Back to Dashboard</button>
            </div>
            
            <h1>Contact Us</h1>
            
            <h2>üìû Get in Touch</h2>
            <p>We're here to help you with any questions about your Jeans Club membership, points, redemptions, or general inquiries.</p>
            
            <div class="benefits-list">
                <div class="benefit-item">
                    <div class="benefit-icon">üìß</div>
                    <h3>Email</h3>
                    <p><strong>Primary:</strong> oliviakamukama@gmail.com</p>
                    <p><strong>Support:</strong> support@jeansclub.com</p>
                </div>
                
                <div class="benefit-item">
                    <div class="benefit-icon">üì±</div>
                    <h3>Phone</h3>
                    <p><strong>Customer Service:</strong> +256 772558913</p>
                    <p><strong>WhatsApp:</strong> +256 772558913</p>
                </div>
                
                <div class="benefit-item">
                    <div class="benefit-icon">‚è∞</div>
                    <h3>Business Hours</h3>
                    <p><strong>Monday - Saturday:</strong> 8:00 AM - 9:00 PM</p>
                    <p><strong>Sunday:</strong> Closed</p>
                </div>
                
                <div class="benefit-item">
                    <div class="benefit-icon">üìç</div>
                    <h3>Location</h3>
                    <p>Kampala, Uganda</p>
                    <p>Premium Denim Boutique</p>
                </div>
            </div>
            
            <h2>üåê Connect With Us</h2>
            <p>Follow us on social media for the latest updates, style tips, and exclusive offers:</p>
            
            <div class="social-links" style="justify-content: center; margin: 30px 0;">
                <a href="https://www.tiktok.com/@jeansclubug?_r=1&_t=ZM-91wJ0p98EMG" target="_blank" class="social-link social-tiktok">
                    <span>üéµ</span> TikTok
                </a>
                <a href="https://www.instagram.com/jeans_club_ug?igsh=NmFkNTI5MDYzMTZk" target="_blank" class="social-link social-instagram">
                    <span>üì∏</span> Instagram
                </a>
                <a href="https://x.com/jeansclub_ug?s=20" target="_blank" class="social-link social-x">
                    <span>ùïè</span> X (Twitter)
                </a>
            </div>
            
            <h2>üìã Frequently Asked Questions</h2>
            
            <h3>Membership Questions</h3>
            <p><strong>Q: How do I join Jeans Club?</strong><br>
            A: Click "Sign Up" on our website and follow the simple registration process.</p>
            
            <p><strong>Q: Is there a membership fee?</strong><br>
            A: No, Jeans Club membership is completely free!</p>
            
            <p><strong>Q: How do I check my points balance?</strong><br>
            A: Log into your dashboard to see your current points and tier status.</p>
            
            <h3>Points & Redemptions</h3>
            <p><strong>Q: How do I earn points?</strong><br>
            A: Earn points with every purchase. The amount depends on your current tier multiplier.</p>
            
            <p><strong>Q: How do I redeem points?</strong><br>
            A: You can create discount vouchers or use the QR redemption system for instant savings.</p>
            
            <p><strong>Q: Do points expire?</strong><br>
            A: No, your points never expire as long as your account remains active.</p>
            
            <h3>Tier System</h3>
            <p><strong>Q: How do I move to a higher tier?</strong><br>
            A: Accumulate points through purchases and referrals to automatically progress to higher tiers.</p>
            
            <p><strong>Q: Can I be downgraded to a lower tier?</strong><br>
            A: No, once you reach a tier, you never go down. Our system only allows tier upgrades.</p>
            
            <h2>üÜò Need Immediate Help?</h2>
            <p>For urgent issues or assistance during checkout, please call us directly at <strong>+256 772558913</strong> during business hours.</p>
            
            <div style="text-align: center; margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                <h3>Ready to Shop?</h3>
                <p>Visit our store or contact us for personalized shopping assistance!</p>
                <button class="btn" onclick="showDashboardSection()">Go to Dashboard</button>
            </div>
        </div>

        <!-- Rest of your existing HTML content - UNCHANGED -->
        <!-- Signup Section -->
        <div id="signupSection" class="card">
            <h2 class="section-title">Create Account</h2>
            <div class="form-group">
                <label for="userName">Full Name</label>
                <input type="text" id="userName" placeholder="Enter your full name" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="userEmail">Email Address</label>
                <input type="email" id="userEmail" placeholder="Enter your email" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="userPassword">Password</label>
                <input type="password" id="userPassword" placeholder="Create a password" autocomplete="new-password">
            </div>
            <div class="form-group">
                <label for="referralCode">Referral Code (Optional)</label>
                <input type="text" id="referralCode" placeholder="Enter referral code if any" autocomplete="off">
            </div>
            
            <div class="newsletter-checkbox">
                <input type="checkbox" id="newsletterSignup" checked>
                <label for="newsletterSignup">Subscribe to our newsletter for exclusive deals and updates</label>
            </div>
            
            <button class="btn" onclick="signUpWithEmail()">Create Account</button>
            <div class="form-group" style="text-align: center; margin: 20px 0;">
                <div style="border-bottom: 1px solid #ddd; line-height: 0.1em; margin: 10px 0 20px;">
                    <span style="background: white; padding: 0 10px; color: #666;">OR</span>
                </div>
                <div class="google-signin-button"></div>
            </div>
            <div class="form-group" style="text-align: center;">
                <p>Already have an account? <a href="#" onclick="showLoginScreen()" style="color: #667eea; text-decoration: none;">Login here</a></p>
            </div>
        </div>

        <!-- Login Section -->
        <div id="loginSection" class="card hidden">
            <h2 class="section-title">Login to Your Account</h2>
            <div class="form-group">
                <label for="loginJCId">JC ID</label>
                <input type="text" id="loginJCId" placeholder="Enter your JC ID" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password" autocomplete="current-password">
            </div>
            <button class="btn" onclick="loginWithCredentials()">Login</button>
            
            <div class="form-group" style="text-align: center; margin: 20px 0;">
                <a href="#" onclick="showPasswordResetScreen()" style="color: #667eea; text-decoration: none;">Forgot Password?</a>
            </div>
            
            <div class="form-group" style="text-align: center; margin: 20px 0;">
                <div style="border-bottom: 1px solid #ddd; line-height: 0.1em; margin: 10px 0 20px;">
                    <span style="background: white; padding: 0 10px; color: #666;">OR</span>
                </div>
                <div class="google-login-button"></div>
            </div>
            <div class="form-group" style="text-align: center;">
                <p>Don't have an account? <a href="#" onclick="showSignupScreen()" style="color: #667eea; text-decoration: none;">Sign up here</a></p>
            </div>
            <div class="form-group" style="text-align: center; margin-top: 20px;">
                <button class="btn secondary" onclick="showAdminLogin()">Staff Login</button>
            </div>
        </div>

        <!-- Password Reset Section -->
        <div id="passwordResetSection" class="card hidden">
            <div class="nav-buttons">
                <button class="btn secondary" onclick="showLoginScreen()">Back to Login</button>
            </div>

            <h2 class="section-title">Reset Your Password</h2>
            
            <div class="info-card">
                <h3>Request Password Reset</h3>
                <div class="form-group">
                    <label for="resetJCId">Your JC ID</label>
                    <input type="text" id="resetJCId" placeholder="Enter your JC ID">
                </div>
                <button class="btn" onclick="requestPasswordReset()">Send Reset Code</button>
                <div id="resetRequestResult" style="margin-top: 10px;"></div>
            </div>

            <div id="resetForm" class="info-card hidden">
                <h3>Enter Reset Code & New Password</h3>
                <div class="form-group">
                    <label for="resetToken">Reset Code (Check your email)</label>
                    <input type="text" id="resetToken" placeholder="Enter the reset code from email">
                </div>
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" placeholder="Enter new password">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm New Password</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm new password">
                </div>
                <button class="btn" onclick="executePasswordReset()">Reset Password</button>
                <div id="resetExecuteResult" style="margin-top: 10px;"></div>
            </div>

            <div class="info-card">
                <h3>Need Help?</h3>
                <p>If you're having trouble resetting your password:</p>
                <ul> 
                     <li>Make sure you're entering the correct JC ID</li>
                    <li>Check your spam/junk folder for the reset email</li>
                    <li>Contact support at <strong>oliviakamukama@gmail.com</strong></li>
                </ul>
            </div>
        </div>

        <!-- Admin Login Section -->
        <div id="adminLoginSection" class="card hidden">
            <div class="nav-buttons">
                <button class="btn secondary" onclick="showLoginScreen()">‚Üê Back to User Login</button>
            </div>

            <h2 class="section-title">Staff Login</h2>
            
            <div class="form-group">
                <label for="adminJCId">Staff JC ID</label>
                <input type="text" id="adminJCId" placeholder="Enter staff JC ID">
            </div>
            <div class="form-group">
                <label for="adminPassword">Password</label>
                <input type="password" id="adminPassword" placeholder="Enter staff password">
            </div>
            <button class="btn" onclick="adminLogin()">Staff Login</button>
            
            <div class="info-card" style="margin-top: 20px; background: #f8f9fa; padding: 15px; border-radius: 8px;">
                <h3>Staff Access Only</h3>
                <p>This section is for authorized staff members only. Please enter your staff credentials to access the admin dashboard.</p>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="adminDashboard" class="card hidden">
            <div class="nav-buttons">
                <button class="btn secondary" onclick="logout()">‚Üê Logout</button>
            </div>

            <h2 class="section-title">Staff Dashboard</h2>
            
            <div class="member-info">
                <div class="info-card">
                    <h3>Staff Information</h3>
                    <p><strong>JC ID:</strong> <span id="adminStaffJcId"></span></p>
                    <p><strong>Role:</strong> <span id="adminRole">Staff</span></p>
                    <p><strong>Last Login:</strong> <span id="adminLastLogin"></span></p>
                </div>
                
                <div class="info-card">
                    <h3>Quick Actions</h3>
                    <button class="btn" onclick="showManageMembers()" style="margin-bottom: 10px; width: 100%;">
                        Manage Members
                    </button>
                    <button class="btn" onclick="showAddPoints()" style="margin-bottom: 10px; width: 100%;">
                        Add Points
                    </button>
                    <button class="btn" onclick="showRedemptionHistory()" style="width: 100%;">
                        Redemption History
                    </button>
                </div>
            </div>

            <!-- Manage Members Section -->
            <div id="manageMembersSection" class="hidden">
                <h3 style="color: #333; margin: 20px 0 10px;">Manage Members</h3>
                <div class="form-group">
                    <input type="text" id="searchMemberJCId" placeholder="Search by JC ID" onkeyup="searchMember()">
                </div>
                
                <div id="memberSearchResults" class="members-list"></div>
                
                <div id="memberDetails" class="hidden">
                    <div class="admin-card">
                        <h3>Member Details</h3>
                        <p><strong>JC ID:</strong> <span id="editMemberJCId"></span></p>
                        <p><strong>Name:</strong> <span id="editMemberName"></span></p>
                        <p><strong>Email:</strong> <span id="editMemberEmail"></span></p>
                        <p><strong>Tier:</strong> <span id="editMemberTier"></span></p>
                        <p><strong>Points:</strong> <span id="editMemberPoints"></span></p>
                        
                        <div class="form-group" style="margin-top: 15px;">
                            <label for="editPoints">Adjust Points</label>
                            <input type="number" id="editPoints" placeholder="Enter points to add/remove">
                        </div>
                        <div class="form-group">
                            <label for="editReason">Reason</label>
                            <input type="text" id="editReason" placeholder="Reason for adjustment">
                        </div>
                        <button class="btn" onclick="updateMemberPoints()">Update Points</button>
                        <div id="updateResult" style="margin-top: 10px;"></div>
                    </div>
                </div>
            </div>

            <!-- Add Points Section -->
            <div id="addPointsSection" class="hidden">
                <h3 style="color: #333; margin: 20px 0 10px;">Add Points to Member</h3>
                <div class="form-group">
                    <label for="addPointsJCId">JC ID</label>
                    <input type="text" id="addPointsJCId" placeholder="Enter member's JC ID">
                </div>
                <div class="form-group">
                    <label for="addPointsAmount">Points Amount</label>
                    <input type="number" id="addPointsAmount" placeholder="Enter points to add">
                </div>
                <div class="form-group">
                    <label for="addPointsReason">Reason</label>
                    <input type="text" id="addPointsReason" placeholder="Purchase, referral, etc.">
                </div>
                <button class="btn" onclick="addPointsToMember()">Add Points</button>
                <div id="addPointsResult" style="margin-top: 10px;"></div>
            </div>

            <!-- Redemption History -->
            <div id="redemptionHistorySection" class="hidden">
                <h3 style="color: #333; margin: 20px 0 10px;">Redemption History</h3>
                <div class="form-group">
                    <input type="text" id="searchRedemption" placeholder="Search by JC ID or Voucher Code" onkeyup="searchRedemptions()">
                </div>
                <div id="redemptionHistoryList"></div>
            </div>
        </div>

        <!-- User Dashboard -->
        <div id="userDashboard" class="card hidden">
            <div class="nav-buttons">
                <button class="btn secondary" onclick="logout()">Logout</button>
                <button class="btn" onclick="showAdminDashboard()" id="adminAccessBtn" class="hidden">Staff Panel</button>
            </div>

            <div class="member-card-container">
                <div class="member-card" id="memberCard">
                    <div class="card-background-pattern"></div>
                    <div class="card-chip"></div>
                    <div class="card-logo">JC</div>
                    <div class="card-hologram"></div>
                    <div class="card-number" id="cardNumberDisplay"></div>
                    <div class="card-holder">
                        MEMBER NAME
                        <div class="card-holder-name" id="cardHolderName"></div>
                    </div>
                    <div class="card-tier" id="cardTier"></div>
                    <div class="card-date" id="cardDate"></div>
                </div>
            </div>

            <div class="member-info">
                <div class="info-card">
                    <h3>Member Information</h3>
                    <p><strong>JC ID:</strong> <span id="displayJCId"></span></p>
                    <p><strong>Name:</strong> <span id="displayName"></span></p>
                    <p><strong>Email:</strong> <span id="displayEmail"></span></p>
                    <p><strong>Tier:</strong> <span id="displayTier"></span></p>
                </div>
                
                <div class="info-card">
                    <h3>Points Balance</h3>
                    <p><strong>Available Points:</strong> <span id="displayPoints" style="font-size: 1.5em; font-weight: bold;"></span></p>
                    <p><strong>Tier Multiplier:</strong> <span id="displayMultiplier"></span></p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="tierProgress"></div>
                    </div>
                    <p><strong>Next Tier:</strong> <span id="nextTierInfo"></span></p>
                </div>
                
                <div class="info-card">
                    <h3>Referral Program</h3>
                    <p><strong>Your Referral Code:</strong> <span id="referralCodeDisplay" style="font-family: monospace; font-weight: bold;"></span></p>
                    <p><strong>Referral Points Earned:</strong> <span id="referralPoints">0</span></p>
                    <p>Share your code and earn <strong>100 points</strong> for each friend who joins!</p>
                    <button class="btn" onclick="shareReferralCode()" style="margin-top: 10px;">Share Referral Code</button>
                </div>
            </div>

            <!-- Newsletter Preference -->
            <div class="info-card" style="margin-top: 20px;">
                <h3>Newsletter Preferences</h3>
                <div class="newsletter-checkbox">
                    <input type="checkbox" id="newsletterPreference" onchange="updateNewsletterPreference()">
                    <label for="newsletterPreference">Subscribe to exclusive offers and updates</label>
                </div>
                <div id="newsletterUpdateResult" style="margin-top: 10px;"></div>
            </div>

            <!-- Points Redemption Section -->
            <h3 class="section-title" style="margin-top: 30px;">Points Redemption</h3>
            <div class="form-group">
                <label for="redeemPoints">Points to Redeem</label>
                <input type="number" id="redeemPoints" placeholder="Enter points to redeem">
            </div>
            <div class="form-group">
                <label for="redeemOption">Redemption Option</label>
                <select id="redeemOption">
                    <option value="voucher">Create Discount Voucher</option>
                    <option value="paywithpoints" id="payWithPointsOption">Pay with Points (Gold+ Only)</option>
                    <option value="upgrade">Tier Upgrade Boost</option>
                </select>
            </div>
            <button class="btn" onclick="redeemPoints()">Redeem</button>
            <div id="redeemResult" style="margin-top: 10px;"></div>

            <!-- Voucher Management Section -->
            <div class="voucher-management-section">
                <h3 class="section-title">Your Vouchers</h3>
                <button class="btn" onclick="refreshVouchers()">Refresh Vouchers</button>
                <div id="vouchersList"></div>
            </div>

            <!-- Quick Scan Button -->
            <button class="quick-scan-btn" onclick="openCameraScanner()">
                üì∏ Quick Scan Voucher
            </button>

            <!-- QR Redemption Panel -->
            <div id="qrRedemptionPanel" class="hidden">
                <h3 class="section-title">QR Code Redemption</h3>
                <div class="scan-voucher-section">
                    <p>Scan a voucher QR code for instant redemption at checkout.</p>
                    <button class="btn" onclick="openCameraScanner()">Open Camera Scanner</button>
                </div>
                
                <div id="qrRedemptionHistory"></div>
            </div>

            <!-- Redemption Results Display -->
            <div id="redemptionResults"></div>

            <!-- Activity Log -->
            <div class="activity-log" style="margin-top: 30px;">
                <h3 class="section-title">Recent Activity</h3>
                <div id="activityLog"></div>
            </div>
        </div>

        <!-- Main Dashboard (Default View) -->
        <div id="mainDashboard" class="card">
            <h2 class="section-title">Welcome to Jeans Club</h2>
            <p style="color: #666; margin-bottom: 30px; text-align: center;">Raised on Denim. Elevate your experience with our exclusive tiered membership program.</p>
            
            <div class="member-info">
                <div class="info-card">
                    <h3>7 Tiers</h3>
                    <p>Progress from Pearl to Platinum with increasing benefits and multipliers.</p>
                </div>
                
                <div class="info-card">
                    <h3>Points System</h3>
                    <p>Earn points with every purchase. Higher tiers earn points faster.</p>
                </div>
                
                <div class="info-card">
                    <h3>QR Redemption</h3>
                    <p>Instant voucher redemption with QR code scanning technology.</p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn" onclick="showSignupScreen()">Sign Up</button>
                <button class="btn secondary" onclick="showLoginScreen()">Login</button>
            </div>

            <!-- Quick Info Cards -->
            <div class="member-info" style="margin-top: 30px;">
                <div class="info-card" onclick="showMembershipInfo()" style="cursor: pointer;">
                    <h3>üìã Membership Info</h3>
                    <p>Learn about our loyalty program, how to join, and membership features.</p>
                    <small style="color: #667eea;">Click to learn more ‚Üí</small>
                </div>
                
                <div class="info-card" onclick="showBenefits()" style="cursor: pointer;">
                    <h3>‚≠ê Member Benefits</h3>
                    <p>Discover exclusive benefits, tier-specific perks, and how to maximize rewards.</p>
                    <small style="color: #667eea;">Click to learn more ‚Üí</small>
                </div>
                
                <div class="info-card" onclick="showTiers()" style="cursor: pointer;">
                    <h3>üèÜ Tier System</h3>
                    <p>Explore our 7-tier system, progression requirements, and tier benefits.</p>
                    <small style="color: #667eea;">Click to learn more ‚Üí</small>
                </div>
                
                <div class="info-card" onclick="showContact()" style="cursor: pointer;">
                    <h3>üìû Contact Us</h3>
                    <p>Get in touch, find our social media, and browse FAQs.</p>
                    <small style="color: #667eea;">Click to learn more ‚Üí</small>
                </div>
            </div>

            <!-- Social Media Links -->
            <div style="text-align: center; margin-top: 40px;">
                <h3>Follow Us</h3>
                <div class="social-links" style="justify-content: center;">
                    <a href="https://www.tiktok.com/@jeansclubug?_r=1&_t=ZM-91wJ0p98EMG" target="_blank" class="social-link social-tiktok">
                        <span>üéµ</span> TikTok
                    </a>
                    <a href="https://www.instagram.com/jeans_club_ug?igsh=NmFkNTI5MDYzMTZk" target="_blank" class="social-link social-instagram">
                        <span>üì∏</span> Instagram
                    </a>
                    <a href="https://x.com/jeansclub_ug?s=20" target="_blank" class="social-link social-x">
                        <span>ùïè</span> X (Twitter)
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>JEANS CLUB</h3>
                <p>Raised on Denim. Experience premium denim with exclusive tiered privileges. Join our loyalty program and unlock amazing rewards with every purchase.</p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <p><a href="#" onclick="showMembershipInfo()" style="color: #999; text-decoration: none;">Membership Info</a></p>
                <p><a href="#" onclick="showBenefits()" style="color: #999; text-decoration: none;">Member Benefits</a></p>
                <p><a href="#" onclick="showTiers()" style="color: #999; text-decoration: none;">Tier System</a></p>
                <p><a href="#" onclick="showContact()" style="color: #999; text-decoration: none;">Contact Us</a></p>
            </div>
            
            <div class="footer-section">
                <h3>Contact Info</h3>
                <p>Email: oliviakamukama@gmail.com</p>
                <p>Phone: +256 772558913</p>
                <p>Location: Kampala, Uganda</p>
            </div>
            
            <div class="footer-section">
                <h3>Business Hours</h3>
                <p>Monday - Saturday: 8:00 AM - 9:00 PM</p>
                <p>Sunday: Closed</p>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2024 Jeans Club. All rights reserved. | Raised on Denim</p>
        </div>
    </footer>

    <!-- JavaScript Section -->
    <script>
        // Supabase configuration
        const SUPABASE_URL = 'https://mcxjiyvfqztwlvhvjqcr.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1jeGppeXZmcXp0d2x2aHZqcWNyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDI5MDc0ODQsImV4cCI6MjAxODQ4MzQ4NH0.KP5wBVvOJSqrP3h5go8SUjqNLpTp6_T6TfZ2ZMC6328';
        
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // Global variables
        let currentUser = null;
        let html5QrCode = null;
        let currentCameraId = null;
        let isFlashOn = false;
        let stream = null;

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeGoogleSignIn();
            initializeNavigation();
            checkSession();
        });

        // Navigation functions
        function initializeNavigation() {
            // Toggle mobile menu
            const menuToggle = document.querySelector('.menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            
            menuToggle?.addEventListener('click', function() {
                navLinks.classList.toggle('active');
                menuToggle.classList.toggle('active');
            });

            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.main-navigation') && !event.target.closest('.menu-toggle')) {
                    navLinks.classList.remove('active');
                    menuToggle.classList.remove('active');
                }
            });
        }

        // Search functionality
        function showSearch() {
            const modal = document.getElementById('searchModal');
            modal.classList.add('active');
            document.getElementById('searchInput').focus();
        }

        function hideSearch() {
            document.getElementById('searchModal').classList.remove('active');
        }

        // Information page navigation
        function showMembershipInfo() {
            hideAllSections();
            document.getElementById('membershipInfoPage').classList.remove('hidden');
            closeMobileMenu();
        }

        function showBenefits() {
            hideAllSections();
            document.getElementById('benefitsInfoPage').classList.remove('hidden');
            closeMobileMenu();
        }

        function showTiers() {
            hideAllSections();
            document.getElementById('tiersInfoPage').classList.remove('hidden');
            closeMobileMenu();
        }

        function showContact() {
            hideAllSections();
            document.getElementById('contactInfoPage').classList.remove('hidden');
            closeMobileMenu();
        }

        function showDashboardSection() {
            hideAllSections();
            if (currentUser) {
                showUserDashboard();
            } else {
                document.getElementById('mainDashboard').classList.remove('hidden');
            }
            closeMobileMenu();
        }

        function closeMobileMenu() {
            const navLinks = document.querySelector('.nav-links');
            const menuToggle = document.querySelector('.menu-toggle');
            navLinks.classList.remove('active');
            menuToggle.classList.remove('active');
        }

        // Section management
        function hideAllSections() {
            // Hide all main content sections
            const sections = [
                'signupSection', 'loginSection', 'passwordResetSection', 'adminLoginSection',
                'adminDashboard', 'userDashboard', 'mainDashboard',
                'membershipInfoPage', 'benefitsInfoPage', 'tiersInfoPage', 'contactInfoPage'
            ];
            
            sections.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.classList.add('hidden');
            });
        }

        // Authentication functions
        function showSignupScreen() {
            hideAllSections();
            document.getElementById('signupSection').classList.remove('hidden');
        }

        function showLoginScreen() {
            hideAllSections();
            document.getElementById('loginSection').classList.remove('hidden');
        }

        function showPasswordResetScreen() {
            hideAllSections();
            document.getElementById('passwordResetSection').classList.remove('hidden');
        }

        function showAdminLogin() {
            hideAllSections();
            document.getElementById('adminLoginSection').classList.remove('hidden');
        }

        // Sign up with email
        async function signUpWithEmail() {
            const name = document.getElementById('userName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const password = document.getElementById('userPassword').value;
            const referralCode = document.getElementById('referralCode').value.trim();
            const newsletter = document.getElementById('newsletterSignup').checked;

            if (!name || !email || !password) {
                alert('Please fill in all required fields');
                return;
            }

            try {
                // Generate JC ID
                const jcId = 'JC' + Math.random().toString(36).substr(2, 9).toUpperCase();
                const referralPoints = 10; // Welcome points

                // Create user in Supabase
                const { data: authData, error: authError } = await supabase.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        data: {
                            name: name,
                            jc_id: jcId,
                            newsletter_subscribed: newsletter
                        }
                    }
                });

                if (authError) throw authError;

                // Create user profile in database
                const { error: dbError } = await supabase
                    .from('users')
                    .insert([{
                        id: authData.user.id,
                        jc_id: jcId,
                        name: name,
                        email: email,
                        points: referralPoints,
                        tier: 'pearl',
                        referral_code: generateReferralCode(),
                        newsletter_subscribed: newsletter
                    }]);

                if (dbError) throw dbError;

                // Handle referral if provided
                if (referralCode) {
                    await handleReferral(referralCode, jcId);
                }

                alert('Account created successfully! Your JC ID is: ' + jcId + '\nPlease login with your JC ID and password.');
                showLoginScreen();
            } catch (error) {
                alert('Error creating account: ' + error.message);
            }
        }

        // Login with credentials
        async function loginWithCredentials() {
            const jcId = document.getElementById('loginJCId').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!jcId || !password) {
                alert('Please enter both JC ID and password');
                return;
            }

            try {
                // Get user by JC ID
                const { data: userData, error: userError } = await supabase
                    .from('users')
                    .select('email')
                    .eq('jc_id', jcId)
                    .single();

                if (userError) throw userError;

                // Sign in with email and password
                const { data: authData, error: authError } = await supabase.auth.signInWithPassword({
                    email: userData.email,
                    password: password
                });

                if (authError) throw authError;

                currentUser = authData.user;
                showUserDashboard();
                updateLastLogin();
            } catch (error) {
                alert('Login failed: ' + error.message);
            }
        }

        // Check existing session
        async function checkSession() {
            try {
                const { data, error } = await supabase.auth.getSession();
                if (error) throw error;
                
                if (data.session) {
                    currentUser = data.session.user;
                    showUserDashboard();
                } else {
                    showDashboardSection();
                }
            } catch (error) {
                console.error('Session check error:', error);
                showDashboardSection();
            }
        }

        // Logout
        async function logout() {
            try {
                await supabase.auth.signOut();
                currentUser = null;
                showDashboardSection();
                hideAllSections();
                document.getElementById('mainDashboard').classList.remove('hidden');
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        // Generate referral code
        function generateReferralCode() {
            return 'REF' + Math.random().toString(36).substr(2, 6).toUpperCase();
        }

        // Handle referral
        async function handleReferral(referralCode, newUserId) {
            try {
                // Find referrer by referral code
                const { data: referrer, error } = await supabase
                    .from('users')
                    .select('jc_id, points')
                    .eq('referral_code', referralCode)
                    .single();

                if (error) return;

                // Update referrer's points
                const newPoints = referrer.points + 100;
                await supabase
                    .from('users')
                    .update({ points: newPoints })
                    .eq('jc_id', referrer.jc_id);

                // Update new user's points (bonus for being referred)
                await supabase
                    .from('users')
                    .update({ points: 20 })
                    .eq('jc_id', newUserId);

                // Log referral activity
                await supabase
                    .from('activity_log')
                    .insert([{
                        jc_id: referrer.jc_id,
                        action: 'referral_bonus',
                        points_change: 100,
                        description: `Referred new member ${newUserId}`
                    }]);
            } catch (error) {
                console.error('Referral handling error:', error);
            }
        }

        // Show user dashboard
        async function showUserDashboard() {
            hideAllSections();
            document.getElementById('userDashboard').classList.remove('hidden');
            
            try {
                // Get user data
                const { data: userData, error } = await supabase
                    .from('users')
                    .select('*')
                    .eq('id', currentUser.id)
                    .single();

                if (error) throw error;

                // Update display
                document.getElementById('displayJCId').textContent = userData.jc_id;
                document.getElementById('displayName').textContent = userData.name;
                document.getElementById('displayEmail').textContent = userData.email;
                document.getElementById('displayTier').textContent = userData.tier.charAt(0).toUpperCase() + userData.tier.slice(1);
                document.getElementById('displayPoints').textContent = userData.points.toLocaleString();
                document.getElementById('displayMultiplier').textContent = getTierMultiplier(userData.tier) + 'x';
                document.getElementById('referralCodeDisplay').textContent = userData.referral_code;
                
                // Update member card
                updateMemberCard(userData);
                
                // Load vouchers
                loadVouchers(userData.jc_id);
                
                // Load activity log
                loadActivityLog(userData.jc_id);
                
                // Update tier progress
                updateTierProgress(userData.points, userData.tier);
                
                // Update newsletter preference
                document.getElementById('newsletterPreference').checked = userData.newsletter_subscribed;
                
                // Check if user is admin/staff
                if (userData.is_staff) {
                    document.getElementById('adminAccessBtn').classList.remove('hidden');
                }
            } catch (error) {
                console.error('Error loading user dashboard:', error);
            }
        }

        // Update member card
        function updateMemberCard(userData) {
            const card = document.getElementById('memberCard');
            
            // Update card class for tier styling
            card.className = 'member-card ' + userData.tier.toLowerCase();
            
            // Update card number (JC ID)
            const jcIdDisplay = userData.jc_id.split('').map(char => {
                return `<span>${char}</span>`;
            }).join('');
            document.getElementById('cardNumberDisplay').innerHTML = jcIdDisplay;
            
            // Update card holder name
            document.getElementById('cardHolderName').textContent = userData.name.toUpperCase();
            
            // Update tier
            document.getElementById('cardTier').textContent = userData.tier.toUpperCase();
            
            // Update date (month/year of joining)
            const date = new Date();
            const month = date.getMonth() + 1;
            const year = date.getFullYear();
            document.getElementById('cardDate').textContent = month.toString().padStart(2, '0') + '/' + year.toString().slice(2);
        }

        // Get tier multiplier
        function getTierMultiplier(tier) {
            const multipliers = {
                'pearl': 1.0,
                'bronze': 1.1,
                'silver': 1.25,
                'ruby': 1.3,
                'gold': 1.4,
                'sapphire': 1.5,
                'platinum': 1.6
            };
            return multipliers[tier.toLowerCase()] || 1.0;
        }

        // Update tier progress
        function updateTierProgress(points, currentTier) {
            const tiers = [
                { name: 'Pearl', min: 0, max: 7499 },
                { name: 'Bronze', min: 7500, max: 24999 },
                { name: 'Silver', min: 25000, max: 99999 },
                { name: 'Ruby', min: 100000, max: 249999 },
                { name: 'Gold', min: 250000, max: 499999 },
                { name: 'Sapphire', min: 500000, max: 999999 },
                { name: 'Platinum', min: 1000000, max: Infinity }
            ];
            
            const currentTierIndex = tiers.findIndex(t => t.name.toLowerCase() === currentTier.toLowerCase());
            const currentTierData = tiers[currentTierIndex];
            
            let progress = 0;
            let nextTier = 'Maximum tier reached';
            
            if (currentTierIndex < tiers.length - 1) {
                const nextTierData = tiers[currentTierIndex + 1];
                const tierRange = currentTierData.max - currentTierData.min;
                const progressInTier = points - currentTierData.min;
                progress = (progressInTier / tierRange) * 100;
                nextTier = `${nextTierData.name} (${nextTierData.min.toLocaleString()} points needed)`;
            } else {
                progress = 100;
            }
            
            document.getElementById('tierProgress').style.width = `${Math.min(100, Math.max(0, progress))}%`;
            document.getElementById('nextTierInfo').textContent = nextTier;
        }

        // Load vouchers
        async function loadVouchers(jcId) {
            try {
                const { data: vouchers, error } = await supabase
                    .from('vouchers')
                    .select('*')
                    .eq('jc_id', jcId)
                    .order('created_at', { ascending: false });

                if (error) throw error;

                const vouchersList = document.getElementById('vouchersList');
                vouchersList.innerHTML = '';

                vouchers.forEach(voucher => {
                    const status = voucher.used ? 'used' : voucher.expires_at < new Date().toISOString() ? 'expired' : 'active';
                    const statusClass = status === 'active' ? 'status-active' : status === 'used' ? 'status-used' : 'status-expired';
                    const statusText = status === 'active' ? 'Active' : status === 'used' ? 'Used' : 'Expired';

                    const voucherElement = document.createElement('div');
                    voucherElement.className = `voucher-item ${status}`;
                    voucherElement.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <strong>${voucher.discount_percentage}% Discount Voucher</strong>
                                <div class="voucher-code">${voucher.code}</div>
                                <p>Points used: ${voucher.points_used.toLocaleString()}</p>
                                <p>Expires: ${new Date(voucher.expires_at).toLocaleDateString()}</p>
                            </div>
                            <div>
                                <span class="voucher-status ${statusClass}">${statusText}</span>
                            </div>
                        </div>
                        ${status === 'active' ? `
                            <div class="voucher-qr" id="qr-${voucher.id}"></div>
                            <button class="btn" onclick="generateVoucherQR('${voucher.id}', 'qr-${voucher.id}')" style="margin-top: 10px;">
                                Generate QR Code
                            </button>
                        ` : ''}
                    `;
                    vouchersList.appendChild(voucherElement);
                });
            } catch (error) {
                console.error('Error loading vouchers:', error);
            }
        }

        // Generate voucher QR code
        async function generateVoucherQR(voucherId, containerId) {
            try {
                const { data: voucher, error } = await supabase
                    .from('vouchers')
                    .select('*')
                    .eq('id', voucherId)
                    .single();

                if (error) throw error;

                const qrData = JSON.stringify({
                    type: 'voucher',
                    voucher_id: voucher.id,
                    code: voucher.code,
                    jc_id: voucher.jc_id,
                    discount: voucher.discount_percentage,
                    points: voucher.points_used,
                    expires_at: voucher.expires_at
                });

                // Generate QR code
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                
                // Use QRCode.js or similar library
                // For now, create a simple placeholder
                container.innerHTML = `
                    <div style="padding: 10px; background: white; border: 1px solid #ddd; display: inline-block;">
                        <div style="font-family: monospace; font-size: 12px; text-align: center;">
                            QR Code for: ${voucher.code}<br>
                            Scan at checkout
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Error generating QR code:', error);
            }
        }

        // Load activity log
        async function loadActivityLog(jcId) {
            try {
                const { data: activities, error } = await supabase
                    .from('activity_log')
                    .select('*')
                    .eq('jc_id', jcId)
                    .order('created_at', { ascending: false })
                    .limit(10);

                if (error) throw error;

                const activityLog = document.getElementById('activityLog');
                activityLog.innerHTML = '';

                activities.forEach(activity => {
                    const activityElement = document.createElement('div');
                    activityElement.className = 'activity-item';
                    activityElement.innerHTML = `
                        <strong>${activity.action.replace('_', ' ').toUpperCase()}</strong>
                        ${activity.points_change ? `<br>Points: ${activity.points_change > 0 ? '+' : ''}${activity.points_change}` : ''}
                        <br><small>${new Date(activity.created_at).toLocaleString()}</small>
                        ${activity.description ? `<br><small>${activity.description}</small>` : ''}
                    `;
                    activityLog.appendChild(activityElement);
                });
            } catch (error) {
                console.error('Error loading activity log:', error);
            }
        }

        // Redeem points
        async function redeemPoints() {
            const points = parseInt(document.getElementById('redeemPoints').value);
            const option = document.getElementById('redeemOption').value;

            if (!points || points <= 0) {
                alert('Please enter a valid points amount');
                return;
            }

            try {
                // Get current user data
                const { data: userData, error: userError } = await supabase
                    .from('users')
                    .select('*')
                    .eq('id', currentUser.id)
                    .single();

                if (userError) throw userError;

                if (userData.points < points) {
                    alert('Insufficient points');
                    return;
                }

                let result;
                switch (option) {
                    case 'voucher':
                        result = await createDiscountVoucher(userData, points);
                        break;
                    case 'paywithpoints':
                        result = await payWithPoints(userData, points);
                        break;
                    case 'upgrade':
                        result = await tierUpgradeBoost(userData, points);
                        break;
                    default:
                        throw new Error('Invalid redemption option');
                }

                if (result.success) {
                    // Update user points
                    const newPoints = userData.points - points;
                    await supabase
                        .from('users')
                        .update({ points: newPoints })
                        .eq('id', currentUser.id);

                    // Log activity
                    await supabase
                        .from('activity_log')
                        .insert([{
                            jc_id: userData.jc_id,
                            action: 'points_redemption',
                            points_change: -points,
                            description: `Redeemed ${points} points for ${option}`
                        }]);

                    // Refresh dashboard
                    showUserDashboard();
                    
                    document.getElementById('redeemResult').innerHTML = `
                        <div class="success-message">
                            ${result.message}
                        </div>
                    `;
                } else {
                    throw new Error(result.message);
                }
            } catch (error) {
                document.getElementById('redeemResult').innerHTML = `
                    <div class="error-message">
                        Error: ${error.message}
                    </div>
                `;
            }
        }

        // Create discount voucher
        async function createDiscountVoucher(userData, points) {
            const discountPercentage = Math.min(50, Math.floor(points / 1000) * 5); // 5% per 1000 points, max 50%
            const voucherCode = 'VC' + Math.random().toString(36).substr(2, 8).toUpperCase();
            const expiresAt = new Date();
            expiresAt.setMonth(expiresAt.getMonth() + 3); // 3 months validity

            const { error } = await supabase
                .from('vouchers')
                .insert([{
                    jc_id: userData.jc_id,
                    code: voucherCode,
                    points_used: points,
                    discount_percentage: discountPercentage,
                    expires_at: expiresAt.toISOString(),
                    used: false
                }]);

            if (error) throw error;

            return {
                success: true,
                message: `Created ${discountPercentage}% discount voucher: ${voucherCode}`
            };
        }

        // Pay with points (Gold tier and above only)
        async function payWithPoints(userData, points) {
            if (userData.tier !== 'gold' && userData.tier !== 'sapphire' && userData.tier !== 'platinum') {
                return {
                    success: false,
                    message: 'Pay with Points is only available for Gold tier and above'
                };
            }

            // Create a special redemption voucher
            const voucherCode = 'PW' + Math.random().toString(36).substr(2, 8).toUpperCase();
            const expiresAt = new Date();
            expiresAt.setDate(expiresAt.getDate() + 7); // 7 days validity

            const { error } = await supabase
                .from('vouchers')
                .insert([{
                    jc_id: userData.jc_id,
                    code: voucherCode,
                    points_used: points,
                    discount_percentage: 100, // Full payment with points
                    expires_at: expiresAt.toISOString(),
                    used: false,
                    is_pay_with_points: true
                }]);

            if (error) throw error;

            return {
                success: true,
                message: `Created Pay with Points voucher: ${voucherCode} (Valid for 7 days)`
            };
        }

        // Tier upgrade boost
        async function tierUpgradeBoost(userData, points) {
            // Calculate how many points needed for next tier
            const tiers = [
                { name: 'Pearl', min: 0, max: 7499 },
                { name: 'Bronze', min: 7500, max: 24999 },
                { name: 'Silver', min: 25000, max: 99999 },
                { name: 'Ruby', min: 100000, max: 249999 },
                { name: 'Gold', min: 250000, max: 499999 },
                { name: 'Sapphire', min: 500000, max: 999999 },
                { name: 'Platinum', min: 1000000, max: Infinity }
            ];

            const currentTierIndex = tiers.findIndex(t => t.name.toLowerCase() === userData.tier.toLowerCase());
            
            if (currentTierIndex === tiers.length - 1) {
                return {
                    success: false,
                    message: 'You are already at the highest tier'
                };
            }

            // Add points directly (boost)
            const newPoints = userData.points + points;
            await supabase
                .from('users')
                .update({ points: newPoints })
                .eq('id', currentUser.id);

            return {
                success: true,
                message: `Added ${points} bonus points to your account for tier progression`
            };
        }

        // Refresh vouchers
        async function refreshVouchers() {
            try {
                const { data: userData } = await supabase
                    .from('users')
                    .select('jc_id')
                    .eq('id', currentUser.id)
                    .single();

                if (userData) {
                    await loadVouchers(userData.jc_id);
                }
            } catch (error) {
                console.error('Error refreshing vouchers:', error);
            }
        }

        // Update newsletter preference
        async function updateNewsletterPreference() {
            const newsletter = document.getElementById('newsletterPreference').checked;
            
            try {
                const { error } = await supabase
                    .from('users')
                    .update({ newsletter_subscribed: newsletter })
                    .eq('id', currentUser.id);

                if (error) throw error;

                document.getElementById('newsletterUpdateResult').innerHTML = `
                    <div class="success-message">
                        Newsletter preference updated successfully
                    </div>
                `;
                
                setTimeout(() => {
                    document.getElementById('newsletterUpdateResult').innerHTML = '';
                }, 3000);
            } catch (error) {
                document.getElementById('newsletterUpdateResult').innerHTML = `
                    <div class="error-message">
                        Error updating preference: ${error.message}
                    </div>
                `;
            }
        }

        // Share referral code
        function shareReferralCode() {
            const referralCode = document.getElementById('referralCodeDisplay').textContent;
            const shareText = `Join Jeans Club and get 20 bonus points! Use my referral code: ${referralCode}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Join Jeans Club',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(shareText)
                    .then(() => alert('Referral link copied to clipboard!'))
                    .catch(() => alert('Referral code: ' + referralCode));
            }
        }

        // UPDATE: CAMERA SCANNER FUNCTIONS - FROM SECOND FILE
        let html5QrCodeScanner = null;

        function openCameraScanner() {
            const modal = document.getElementById('cameraScannerModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            startQRScanner();
        }

        function closeCameraScanner() {
            const modal = document.getElementById('cameraScannerModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
            
            if (html5QrCodeScanner) {
                html5QrCodeScanner.stop();
                html5QrCodeScanner.clear();
                html5QrCodeScanner = null;
            }
        }

        async function startQRScanner() {
            const scanStatus = document.getElementById('scanStatus');
            const qrReaderContainer = document.getElementById('qr-reader');
            
            try {
                // Initialize scanner
                html5QrCodeScanner = new Html5Qrcode("qr-reader");
                
                // Get camera list
                const devices = await Html5Qrcode.getCameras();
                if (devices && devices.length) {
                    const cameraId = devices[0].id; // Use first camera
                    
                    // Start scanning
                    await html5QrCodeScanner.start(
                        cameraId,
                        {
                            fps: 10,
                            qrbox: { width: 250, height: 250 },
                            aspectRatio: 1.0
                        },
                        (decodedText, decodedResult) => {
                            // QR code detected
                            handleScannedQRCode(decodedText);
                        },
                        (errorMessage) => {
                            // Scan error - ignore unless it's a fatal error
                            console.log(`QR Code no longer in front of camera: ${errorMessage}`);
                        }
                    );
                    
                    scanStatus.textContent = "Scanning... Point camera at QR code";
                    scanStatus.className = "scan-status scan-processing";
                    
                } else {
                    throw new Error("No cameras found");
                }
                
            } catch (error) {
                console.error("Scanner error:", error);
                scanStatus.textContent = "Camera error: " + error.message;
                scanStatus.className = "scan-status scan-error";
            }
        }

        async function handleScannedQRCode(qrData) {
            const scanStatus = document.getElementById('scanStatus');
            
            try {
                scanStatus.textContent = "Processing QR code...";
                scanStatus.className = "scan-status scan-processing";
                
                // Parse QR data
                const data = JSON.parse(qrData);
                
                if (data.type === 'voucher') {
                    // Process voucher redemption
                    await processVoucherRedemption(data);
                } else {
                    throw new Error("Invalid QR code type");
                }
                
            } catch (error) {
                console.error("QR processing error:", error);
                scanStatus.textContent = "Error: " + error.message;
                scanStatus.className = "scan-status scan-error";
                
                // Reset after error
                setTimeout(() => {
                    scanStatus.textContent = "Scanning... Point camera at QR code";
                    scanStatus.className = "scan-status scan-processing";
                }, 2000);
            }
        }

        async function processVoucherRedemption(voucherData) {
            const scanStatus = document.getElementById('scanStatus');
            
            try {
                // Check if voucher exists and is valid
                const { data: voucher, error } = await supabase
                    .from('vouchers')
                    .select('*')
                    .eq('id', voucherData.voucher_id)
                    .single();

                if (error) throw new Error("Voucher not found");
                
                if (voucher.used) {
                    throw new Error("Voucher already used");
                }
                
                if (new Date(voucher.expires_at) < new Date()) {
                    throw new Error("Voucher expired");
                }
                
                // Mark voucher as used
                const { error: updateError } = await supabase
                    .from('vouchers')
                    .update({ used: true, used_at: new Date().toISOString() })
                    .eq('id', voucher.id);

                if (updateError) throw updateError;
                
                // Log redemption
                await supabase
                    .from('redemption_history')
                    .insert([{
                        voucher_id: voucher.id,
                        jc_id: voucher.jc_id,
                        points_used: voucher.points_used,
                        discount_percentage: voucher.discount_percentage,
                        redeemed_by: currentUser?.jc_id || 'staff'
                    }]);
                
                // Update scan status
                scanStatus.textContent = "‚úì Voucher redeemed successfully!";
                scanStatus.className = "scan-status scan-success";
                
                // Visual feedback
                document.body.classList.add('scan-success');
                
                // Close scanner after success
                setTimeout(() => {
                    closeCameraScanner();
                    document.body.classList.remove('scan-success');
                    
                    // Refresh vouchers if user is logged in
                    if (currentUser) {
                        refreshVouchers();
                    }
                }, 1500);
                
            } catch (error) {
                throw error;
            }
        }

        function switchCamera() {
            // HTML5 QR Code scanner handles camera switching internally
            // This would require reinitializing the scanner with a different camera
            alert("Camera switching requires scanner reinitialization. Please restart the scanner.");
        }

        function toggleFlash() {
            // Flash control is not directly available in HTML5 QR Code scanner
            // This would need device-specific implementation
            alert("Flash control is device-dependent and may not be available.");
        }

        // Admin functions
        async function adminLogin() {
            const jcId = document.getElementById('adminJCId').value.trim();
            const password = document.getElementById('adminPassword').value;

            try {
                // Check if user exists and is staff
                const { data: userData, error } = await supabase
                    .from('users')
                    .select('*')
                    .eq('jc_id', jcId)
                    .eq('is_staff', true)
                    .single();

                if (error) throw new Error('Invalid staff credentials');

                // Sign in
                const { data: authData, error: authError } = await supabase.auth.signInWithPassword({
                    email: userData.email,
                    password: password
                });

                if (authError) throw authError;

                currentUser = authData.user;
                showAdminDashboard();
            } catch (error) {
                alert('Staff login failed: ' + error.message);
            }
        }

        function showAdminDashboard() {
            hideAllSections();
            document.getElementById('adminDashboard').classList.remove('hidden');
            loadAdminData();
        }

        async function loadAdminData() {
            try {
                const { data: userData } = await supabase
                    .from('users')
                    .select('*')
                    .eq('id', currentUser.id)
                    .single();

                if (userData) {
                    document.getElementById('adminStaffJcId').textContent = userData.jc_id;
                    document.getElementById('adminLastLogin').textContent = new Date().toLocaleString();
                }
            } catch (error) {
                console.error('Error loading admin data:', error);
            }
        }

        // Initialize Google Sign-In
        function initializeGoogleSignIn() {
            // Google Sign-In configuration would go here
            // This is a placeholder for actual Google OAuth implementation
        }

        // Add event listener for search
        document.getElementById('searchInput')?.addEventListener('input', async function(e) {
            const searchTerm = e.target.value.trim();
            const resultsContainer = document.getElementById('searchResults');
            
            if (searchTerm.length < 2) {
                resultsContainer.innerHTML = '';
                return;
            }
            
            try {
                // Search for members by JC ID or name
                const { data: members, error } = await supabase
                    .from('users')
                    .select('jc_id, name, tier, points')
                    .or(`jc_id.ilike.%${searchTerm}%,name.ilike.%${searchTerm}%`)
                    .limit(10);
                
                if (error) throw error;
                
                resultsContainer.innerHTML = '';
                
                members.forEach(member => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    resultItem.innerHTML = `
                        <strong>${member.jc_id}</strong> - ${member.name}
                        <br><small>Tier: ${member.tier} | Points: ${member.points.toLocaleString()}</small>
                    `;
                    resultsContainer.appendChild(resultItem);
                });
            } catch (error) {
                console.error('Search error:', error);
            }
        });

        // Prevent form submission on Enter
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const activeElement = document.activeElement;
                if (activeElement && activeElement.form) {
                    e.preventDefault();
                }
            }
        });

        // Initialize the dashboard on load
        checkSession();
    </script>
</body>
</html>